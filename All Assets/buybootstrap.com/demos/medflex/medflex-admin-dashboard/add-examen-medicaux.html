<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ajouter un Examen Médical</title>

    <!-- Meta -->
    <meta name="description" content="Ajouter un examen médical au dossier du patient">
    <meta property="og:title" content="Ajouter un Examen Médical">
    <meta property="og:description" content="Interface pour ajouter des examens médicaux au dossier du patient">
    <meta property="og:type" content="Website">
    <link rel="shortcut icon" href="assets/images/favicon.svg">

    <!-- CSS Files -->
    <link rel="stylesheet" href="assets/fonts/remix/remixicon.css">
    <link rel="stylesheet" href="assets/css/main.min.css">

    <!-- Vendor CSS Files -->
    <link rel="stylesheet" href="assets/vendor/overlay-scroll/OverlayScrollbars.min.css">
</head>

<body>

    <!-- Page wrapper starts -->
    <div class="page-wrapper">

        <!-- App header starts -->
        <div class="app-header d-flex align-items-center">
            <!-- Toggle buttons and app brand code here -->
        </div>
        <!-- App header ends -->

        <!-- Main container starts -->
        <div class="main-container">

            <!-- Sidebar wrapper starts -->
            <nav id="sidebar" class="sidebar-wrapper">
                <!-- Sidebar content here -->
            </nav>
            <!-- Sidebar wrapper ends -->

            <!-- App container starts -->
            <div class="app-container">

                <!-- App hero header starts -->
                <div class="app-hero-header d-flex align-items-center">
                    <!-- Breadcrumb starts -->
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <i class="ri-home-8-line lh-1 pe-3 me-3 border-end"></i>
                            <a href="index.html">Accueil</a>
                        </li>
                        <li class="breadcrumb-item text-primary" aria-current="page">
                            Ajouter un Examen Médical
                        </li>
                    </ol>
                    <!-- Breadcrumb ends -->
                </div>
                <!-- App Hero header ends -->

                <!-- App body starts -->
                <div class="app-body">

                    <!-- Row starts -->
                    <div class="row gx-3 justify-content-center">
                        <div class="col-8">
                            <div class="card mb-3">
                                <div class="card-body">
                                    <h2 class="card-title">Ajouter un Examen Médical</h2>
                                    <form id="formExamen">
                                        <!-- Sélection du patient -->
                                        <div class="mb-3">
                                            <label for="selectPatient" class="form-label">Sélectionner un Patient</label>
                                            <select class="form-select" id="selectPatient" required>
                                                <option value="">Choisir un patient...</option>
                                                <option value="1">Jean Dupont</option>
                                                <option value="2">Marie Curie</option>
                                                <option value="3">Pierre Durand</option>
                                            </select>
                                        </div>

                                        <!-- Type d'examen -->
                                        <div class="mb-3">
                                            <label for="selectTypeExamen" class="form-label">Type d'Examen</label>
                                            <select class="form-select" id="selectTypeExamen" required>
                                                <option value="">Choisir un type d'examen...</option>
                                                <option value="1">Radiographie</option>
                                                <option value="2">Analyse de sang</option>
                                                <option value="3">Échographie</option>
                                                <option value="4">IRM</option>
                                            </select>
                                        </div>

                                        <!-- Date de l'examen -->
                                        <div class="mb-3">
                                            <label for="dateExamen" class="form-label">Date de l'Examen</label>
                                            <input type="date" class="form-control" id="dateExamen" required>
                                        </div>

                                        <!-- Résultats -->
                                        <div class="mb-3">
                                            <label for="resultats" class="form-label">Résultats</label>
                                            <textarea class="form-control" id="resultats" rows="3" placeholder="Entrez les résultats de l'examen..."></textarea>
                                        </div>

                                        <!-- Rapport -->
                                        <div class="mb-3">
                                            <label for="rapport" class="form-label">Rapport</label>
                                            <textarea class="form-control" id="rapport" rows="3" placeholder="Entrez le rapport médical..."></textarea>
                                        </div>

                                        <!-- Bouton de soumission -->
                                        <div class="d-grid gap-2 col-3 mx-auto">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="ri-save-line"></i> Enregistrer l'Examen
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Row ends -->

                </div>
                <!-- App body ends -->

                <!-- App footer starts -->
                <div class="app-footer bg-white">
                    <span>© Medflex admin 2024</span>
                </div>
                <!-- App footer ends -->

            </div>
            <!-- App container ends -->

        </div>
        <!-- Main container ends -->

    </div>
    <!-- Page wrapper ends -->

    <!-- JavaScript Files -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/moment.min.js"></script>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
    <script src="assets/vendor/overlay-scroll/custom-scrollbar.js"></script>

    <!-- Custom JS files -->
    <script src="assets/js/custom.js"></script>

    <!-- Script pour gérer la soumission du formulaire -->
    <script>
        document.getElementById('formExamen').addEventListener('submit', function (event) {
            event.preventDefault(); // Empêche la soumission par défaut du formulaire

            // Récupérer les valeurs du formulaire
            const idPatient = document.getElementById('selectPatient').value;
            const idTypeExamen = document.getElementById('selectTypeExamen').value;
            const dateExamen = document.getElementById('dateExamen').value;
            const resultats = document.getElementById('resultats').value;
            const rapport = document.getElementById('rapport').value;

            // Valider les champs obligatoires
            if (!idPatient || !idTypeExamen || !dateExamen) {
                alert("Veuillez remplir tous les champs obligatoires.");
                return;
            }

            // Simuler l'envoi des données (à remplacer par une requête AJAX ou une API réelle)
            const examen = {
                idPatient,
                idTypeExamen,
                dateExamen,
                resultats,
                rapport,
                createdAt: new Date().toISOString(),
                createdBy: 1, // ID de l'utilisateur connecté (à remplacer par une valeur dynamique)
                updatedAt: new Date().toISOString(),
                updatedBy: 1, // ID de l'utilisateur connecté (à remplacer par une valeur dynamique)
                isDeleted: false
            };

            console.log("Examen ajouté :", examen);
            alert("Examen médical enregistré avec succès !");

            // Réinitialiser le formulaire après soumission
            document.getElementById('formExamen').reset();
        });
    </script>
</body>

</html>